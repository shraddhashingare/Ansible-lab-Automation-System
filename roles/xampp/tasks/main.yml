---
- name: Check if XAMPP is already installed
  win_stat:
    path: "{{ xampp_exe_path }}"
  register: xampp_installed

- name: XAMPP already installed â€” skipping
  debug:
    msg: "XAMPP already installed"
  when: xampp_installed.stat.exists

- name: Ensure installers directory exists
  win_file:
    path: "{{ installer_folder }}"
    state: directory
  when: not xampp_installed.stat.exists

- name: Download XAMPP installer from GitHub Release
  win_get_url:
    url: "{{ installer_url }}"
    dest: "{{ installer_dest }}"
    force: true
  when: not xampp_installed.stat.exists

- name: Install XAMPP silently
  win_command: '"{{ installer_dest }}" --mode unattended'
  when: not xampp_installed.stat.exists

- name: Installation completed
  debug:
    msg: "XAMPP installed successfully!"
  when: not xampp_installed.stat.exists
