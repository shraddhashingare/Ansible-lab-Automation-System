---
- name: Check if Notepad++ is already installed
  win_stat:
    path: "{{ app_exe_path }}"
  register: np_installed

- name: Notepad++ already installed â€” skipping
  debug:
    msg: "Notepad++ already installed"
  when: np_installed.stat.exists

- name: Ensure installer directory exists
  win_file:
    path: "{{ installer_folder }}"
    state: directory
  when: not np_installed.stat.exists

- name: Download Notepad++ installer from GitHub Release
  win_get_url:
    url: "{{ installer_url }}"
    dest: "{{ installer_dest }}"
    force: true
  when: not np_installed.stat.exists

- name: Install Notepad++ silently
  win_command: '"{{ installer_dest }}" /S'
  when: not np_installed.stat.exists

- name: Installation successful
  debug:
    msg: "Notepad++ installed successfully!"
  when: not np_installed.stat.exists
